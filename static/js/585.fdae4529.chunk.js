"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[585],{1585:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(5043),r=s(6213);const l=new Map,n=r.A.create({baseURL:"https://your-backend-domain.com/api",headers:{"Content-Type":"application/json"}});n.interceptors.request.use((e=>{const t=localStorage.getItem("token");if(t&&e.headers&&(e.headers.Authorization=`Bearer ${t}`),"get"===e.method&&e.url){const t=`${e.url}${JSON.stringify(e.params||{})}`,s=l.get(t);if(s&&Date.now()-s.timestamp<3e5)return Promise.reject({response:{data:s.data},isCached:!0})}return e})),n.interceptors.response.use((e=>{if("get"===e.config.method&&e.config.url){const t=`${e.config.url}${JSON.stringify(e.config.params||{})}`;l.set(t,{data:e.data,timestamp:Date.now()})}return e}),(e=>{var t;return e.isCached?Promise.resolve(e.response):(401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login"),e.response||console.error("Network error:",e),Promise.reject(e))}));const i=n;function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";const[s,r]=(0,a.useState)(null),[l,n]=(0,a.useState)(!1),[c,o]=(0,a.useState)(null),d=(0,a.useCallback)((async function(){try{n(!0),o(null);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];const c=await i[t](e,...a);r(c.data)}catch(c){o(c instanceof Error?c:new Error("An error occurred"))}finally{n(!1)}}),[e,t]);return{data:s,loading:l,error:c,execute:d}}var o=s(9274),d=s(579);const u=()=>{var e,t,s;const[r,l]=(0,a.useState)(""),[n,i]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[x,h]=(0,a.useState)("class"),{data:p,loading:g,execute:f}=c("/classes"),{data:v,loading:b,execute:j}=c("/grades");(0,a.useEffect)((()=>{f()}),[]),(0,a.useEffect)((()=>{r&&n&&u&&j(`/grades/${r}/${n}/${u}`)}),[r,n,u]);const y=e=>e>=90?"text-green-600":e>=80?"text-blue-600":e>=70?"text-yellow-600":"text-red-600";return g?(0,d.jsx)(o.A,{size:"large"}):(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Grade Viewer"}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"View Type"}),(0,d.jsxs)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:x,onChange:e=>h(e.target.value),children:[(0,d.jsx)("option",{value:"class",children:"Class Overview"}),(0,d.jsx)("option",{value:"section",children:"Section Details"}),(0,d.jsx)("option",{value:"student",children:"Student Details"})]})]}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Class"}),(0,d.jsxs)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:r,onChange:e=>l(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"Select a class"}),null===p||void 0===p?void 0:p.map((e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),r&&"class"!==x&&(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Section"}),(0,d.jsxs)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:n,onChange:e=>i(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"Select a section"}),null===p||void 0===p||null===(e=p.find((e=>e.id.toString()===r)))||void 0===e?void 0:e.sections.map((e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),n&&"student"===x&&(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Student"}),(0,d.jsxs)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u,onChange:e=>m(e.target.value),children:[(0,d.jsx)("option",{value:"",children:"Select a student"}),null===p||void 0===p||null===(t=p.find((e=>e.id.toString()===r)))||void 0===t||null===(s=t.sections.find((e=>e.id.toString()===n)))||void 0===s?void 0:s.students.map((e=>(0,d.jsxs)("option",{value:e.id,children:[e.name," (",e.rollNumber,")"]},e.id)))]})]}),b?(0,d.jsx)(o.A,{size:"medium"}):(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marks"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Max Marks"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===v||void 0===v?void 0:v.map((e=>{const t=(s=e.marks,a=e.maxMarks,(s/a*100).toFixed(2));var s,a;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.subject}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.marks}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.maxMarks}),(0,d.jsxs)("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${y(Number(t))}`,children:[t,"%"]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.remarks})]},e.id)}))})]})})})]})}}}]);
//# sourceMappingURL=585.fdae4529.chunk.js.map